function buildMap(e,n){function t(e,n){var t=new google.maps.InfoWindow({content:'<div id="content"><h3 id="firstHeading" class="firstHeading">The Glendale</h3></div>'});commMarker=new google.maps.Marker({position:{lat:38.993799,lng:-76.834594},map:map,zIndex:1e3,animation:google.maps.Animation.DROP,icon:iconPath+"static-comm-marker.png"}),commMarker.addListener("click",function(){t.open(map,commMarker)})}function a(e){e.addListener("click",function(){infowindow=new google.maps.InfoWindow,null!==currentInfoWindow&&currentInfoWindow.close(),currentInfoWindow=infowindow,infowindow.setContent(e.html),infowindow.open(map,e)})}if(bounds=new google.maps.LatLngBounds,addCommMarker){var o=new XMLHttpRequest;o.onreadystatechange=function(){if(4===o.readyState&&200===o.status){var e=JSON.parse(o.responseText),n=Number(e.acf.latitude),a=Number(e.acf.longitude);t(n,a)}},o.open("GET",n,!0),o.send()}var s=[{featureType:"poi",elementType:"labels",stylers:[{visibility:"off"}]},{featureType:"transit",elementType:"labels",stylers:[{visibility:"off"}]}];map=new google.maps.Map(document.getElementById("map-canvas"),{mapTypeControl:!1,scrollwheel:!1,panControl:!1,rotateControl:!1,streetViewControl:!1,zoomControlOptions:{position:google.maps.ControlPosition.RIGHT_BOTTOM},styles:s});for(var i=0;i<e.length;i++){var r=e[i].title.rendered,c=e[i].acf.address,d=e[i].acf.address_2,l=e[i].acf.phone,m=e[i].acf.website,p=e[i].acf.additional_details,u=e[i].acf.latitude,f=e[i].acf.longitude,g="cat-"+e[i].landmark_types[0];r=""!==r?'<strong class="window-heading">'+r+"</strong>":"",c=""!==c?"<br>"+c:"",d=""!==d?"<br>"+d:"",l=""!==l?"<br>"+l:"",m=""!==m?'<br><a target="_blank" href="'+m+'">Website &raquo;</a>':"",p=""!==p?"<br><br>"+p:"",locations.push([i,r,u,f,c,d,l,m,p,g])}for(var v=0;v<locations.length;v++){var w=iconPath+locations[v][9]+".png",h=new google.maps.Marker({position:new google.maps.LatLng(locations[v][2],locations[v][3]),map:map,icon:w,html:'<strong class="heading">'+locations[v][1]+"</strong>"+locations[v][4]+locations[v][5]+locations[v][6]+locations[v][7]+locations[v][8]});markers.push(h),bounds.extend(h.getPosition()),a(h)}map.fitBounds(bounds)}function buildCats(e,n){function t(e,n){e.addEventListener("click",function(e){e.preventDefault(),infowindow&&infowindow.close();for(var t=this.parentElement.getAttribute("id"),a=0;a<locations.length;a++)locations[a][9]===t?(markers[a].setVisible(!0),markers[a].setOptions({zIndex:1100})):locations[a][9]!==t&&markers[a].setVisible(!1);var o=[];o=n.children;for(var s=0;s<o.length;s++)o[s].firstChild.classList.remove("active");this.classList.add("active"),resetBtn.classList.add("active")})}var a=document.getElementById(n).parentNode;a.appendChild(catNav,document.getElementById(n));var o=document.createElement("ul");catNav.appendChild(o);for(var s=0;s<e.length;s++)if(e[s].count>0){var i=document.createElement("li");i.id="cat-"+e[s].id,i.classList.add(e[s].slug);var r=document.createElement("a");r.href="#",r.innerHTML=catCount?'<span class="count">'+e[s].count+"</span>"+e[s].name:e[s].name,i.appendChild(r),o.appendChild(i),t(r,o)}}function initMap(e){var n=new XMLHttpRequest;n.onreadystatechange=function(){4===n.readyState&&200===n.status?(landmarksObj=JSON.parse(n.responseText),document.getElementById("map-canvas").innerHTML="",buildMap(landmarksObj,locationOptionsFeed)):document.getElementById("map-canvas").innerHTML="Error Loading Data"},n.open("GET",e,!0),n.send(),document.getElementById("map-canvas").innerHTML="Loading map..."}function initCats(e){var n=new XMLHttpRequest;n.onreadystatechange=function(){4===n.readyState&&200===n.status&&(catsObj=JSON.parse(n.responseText),buildCats(catsObj,myMap))},n.open("GET",e,!0),n.send()}function callback(){initMap(markersFeed),addCats&&initCats(catsFeed)}function resetMap(e,n){for(var t=0;t<locations.length;t++)markers[t].setVisible(!0);e.fitBounds(bounds),infowindow&&infowindow.close();for(var a=catNav.children[0].childNodes,o=0;o<a.length;o++)a[o].firstChild.classList.remove("active");n.classList.remove("active")}var myMap="map-canvas",apiKey="AIzaSyAyi3yPE8v1UMPEJK5P1sYr5qhC9uik6YE",markersFeed="/wp-json/wp/v2/area_landmarks?per_page=100",addCats=!0,catCount=!1,catsFeed="/wp-json/wp/v2/landmark_types",addCommMarker=!0,locationOptionsFeed="/wp-json/acf/v2/options",iconPath="/wp-content/themes/glendale/imgs/",map,commMarker,bounds,infowindow,currentInfoWindow=null,landmarksObj,catsObj,markers=[],locations=[],resetBtn=document.getElementById("reset-map");document.addEventListener("DOMContentLoaded",function(){if(document.getElementById(myMap)){var e;e=document.querySelector("html").lang?document.querySelector("html").lang:"en";var n=document.createElement("script");n.type="text/javascript",n.src="https://maps.googleapis.com/maps/api/js?key="+apiKey+"&callback=callback&language="+e,document.getElementsByTagName("body")[0].appendChild(n)}});var catNav=document.createElement("nav");catNav.id="map-nav",resetBtn.addEventListener("click",function(){resetMap(map,this)});